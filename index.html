<!DOCTYPE html>
<html lang="jp">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>image targets</title>
    <script src="//cdn.8thwall.com/web/aframe/8frame-0.8.2.min.js"></script>
    <script src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script>
    <script async src="//apps.8thwall.com/xrweb?appKey=lgviLrxed6uunZPh2SWL5zKHACJZkBTjCNwhx5l6pDMGU8VjmcCWnIxaTzp1OzZrQV926i"></script>
  </head>
  <body>
    <script id="vs" type="x-shader/x-vertex">
      attribute vec3 position;
      attribute vec2 textureCoord;
      varying   vec2 vTextureCoord;
      void main()
      {
        vTextureCoord = textureCoord;
        gl_Position = vec4(position, 1.0);
      }
    </script>

    <script id="fs" type="x-shader/x-fragment">
      precision mediump float;
      uniform sampler2D texture;
      uniform float time;
      uniform vec2 mouse;
      uniform vec2 resolution;
      varying vec2 vTextureCoord;

      void main()
      {
        vec2 uv = vTextureCoord;
        vec4 color = texture2D(texture, uv);
        vec2 xy = gl_FragCoord.xy * 1.0;
        vec3 rgb = color.rgb;
        float dot_size = 9.0;
        float dot_size_1of3 = dot_size/3.0;

        if ((mod(xy.x, dot_size)) < dot_size_1of3 * 1.0) {
          rgb.r *= 1.0;
          rgb.g *= 0.0;
          rgb.b *= 0.0;
        } else if ((mod(xy.x, dot_size)) < dot_size_1of3 * 2.0) {
          rgb.r *= 0.0;
          rgb.g *= 1.0;
          rgb.b *= 0.0;
        } else if ((mod(xy.x, dot_size)) < dot_size_1of3 * 3.0) {
          rgb.r *= 0.0;
          rgb.g *= 0.0;
          rgb.b *= 1.0;
        }
        if (mod(xy.y, dot_size) < dot_size_1of3/2.0) {
          discard;
      }
      gl_FragColor = vec4(rgb, 1.0);
    }
  </script>


    <a-scene
      xrweb="disableWorldTracking: true"
      xrextras-almost-there
      xrextras-runtime-error
      xrextras-loading >
      <a-assets>
        <!-- 必要であればここで3Dモデルやimgを読み込む -->
      </a-assets>
      <a-camera position="0 8 8"></a-camera>
      <a-entity
        light="type: directional; castShadow: false; intensity: 0.5;"
        position="-0.8 3 1.85" >
      </a-entity>

      <a-entity xrextras-named-image-target="name: test_3_scaled">
        <!-- ここへマーカー認識した時に表示させたいオブジェクトを子要素として配置 -->
        <a-box material="color: #00EDAF;" shadow >
        </a-box>
      </a-entity>
    </a-scene>
  </body>
</html>